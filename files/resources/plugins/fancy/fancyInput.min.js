/*!
	fancyInput v1.3.3
	(c) 2013 Yair Even Or <http://dropthebit.com>

	MIT-style license.
*/
;(function(f){var e=!!window.ActiveXObject,b="WebkitAppearance" in document.documentElement.style,a;f.fn.fancyInput=function(){if(!e||"ontouchstart" in document.documentElement){g(this)}return this};var c={classToggler:"state1",keypress:function(o){var n=o.target,i=String.fromCharCode(o.charCode),k=n.nextElementSibling,m=n.selectionEnd,p=n.tagName=="TEXTAREA"&&o.keyCode==13;if((n.selectionEnd-n.selectionStart)>0&&o.charCode&&!(o.metaKey||o.ctrlKey)){var l=[n.selectionStart,n.selectionEnd];m=n.selectionStart;if(h.lastDir=="rtl"){l=[n.value.length-n.selectionEnd,n.value.length-n.selectionStart+1]}c.removeChars(k,l)}if(o.charCode&&!(o.metaKey||o.ctrlKey)||p){var j=h.check(i);if(j=="rtl"||(j==""&&h.lastDir=="rtl")){m=n.value.length-n.selectionStart}if(p){i=""}c.maskPassword(n);c.writer(i,n,m)}},input:function(){c.inputResize(this)},maskPassword:function(i){if(i.type=="password"){f(i.nextElementSibling).find("span").each(function(){this.innerHTML=""})}},setCaretHeight:function(i){var j=f(i.nextElementSibling);if(!j.find("span").length){return false}a=j.find("span")[0].clientHeight;j.find("b").height(a)},writer:function(i,l,m){var n=f(l.nextElementSibling).children().not("b"),k=document.createElement("span");if(l.maxLength>0&&n.length>l.maxLength){return this}if(i==" "){i="&nbsp;"}if(i){k.innerHTML=i;this.classToggler=this.classToggler=="state2"?"state1":"state2";k.className=this.classToggler}else{k=document.createElement("br")}if(n.length){if(m==0){f(l.nextElementSibling).prepend(k)}else{var j=n.eq(--m);j.after(k)}}else{l.nextElementSibling.appendChild(k)}if(i){setTimeout(function(){k.removeAttribute("class")},20)}return this},clear:function(i){var j=f(i.parentNode).find(".caret");f(i).html(j)},fillText:function(l,j){var k=j.nextElementSibling,i,m=document.createDocumentFragment();c.clear(j.nextElementSibling);setTimeout(function(){var p=l.length;for(var o=0;o<p;o++){var n="span";if(l[o]=="\n"){n="br"}i=document.createElement(n);i.innerHTML=(l[o]==" ")?"&nbsp;":l[o];m.appendChild(i)}k.appendChild(m)},0)},removeChars:function(j,i){var m=f(j).children().not("b").not(".deleted"),l=f(j).find("b"),k;if(i[0]==i[1]){i[0]--}k=m.slice(i[0],i[1]);if(i[1]-i[0]==1){k.css("position","absolute");k.addClass("deleted");setTimeout(function(){k.remove()},140)}else{k.remove()}},inputResize:function(i){if(i.tagName=="TEXTAREA"){setTimeout(function(){i.style.top="-999px";var k=i.parentNode.scrollHeight;if(f(i).outerHeight()<i.parentNode.scrollHeight){k+=10}i.style.height=k+"px";i.style.top="0";setTimeout(function(){i.scrollTop=0;i.parentNode.scrollTop=9999},50)},0)}if(i.tagName=="INPUT"&&i.type=="text"){i.style.width=0;var j=i.parentNode.scrollWidth;if(i.parentNode.scrollWidth>i.parentNode.clientWidth){j+=20}i.style.width=j+"px"}},keydown:function(n){var m=n.target,r=String.fromCharCode(n.charCode),i=m.nextElementSibling,p=m.selectionEnd,q=((n.metaKey||n.ctrlKey)&&n.keyCode==90)||(n.altKey&&n.keyCode==8),o=(n.metaKey||n.ctrlKey)&&n.keyCode==89,l=(n.metaKey||n.ctrlKey)&&n.keyCode==65,s=(m.selectionEnd==m.selectionStart&&m.selectionEnd==m.value.length),j=n.keyCode==46&&!s;c.setCaret(m);if(l){return true}if(q||o){setTimeout(function(){c.fillText(n.target.value,n.target)},50);return true}if(n.keyCode==8||j){var k=[m.selectionStart,m.selectionEnd];if(h.lastDir=="rtl"){k=[m.value.length-m.selectionEnd,m.value.length-m.selectionStart+1]}if(j&&(m.selectionEnd==m.selectionStart&&m.selectionEnd<m.value.length)){k[0]+=1;k[1]+=1;c.removeChars(i,k)}else{setTimeout(function(){if(n.metaKey||n.ctrlKey){k=[n.target.selectionStart,k[0]]}c.removeChars(i,k)},0)}}if(m.selectionStart==0){m.parentNode.scrollLeft=0}return true},allEvents:function(j){var i=j.target;if(i.tagName!="INPUT"||i.tagName!="TEXTAREA"){return}c.setCaret(i);if(j.type=="paste"){setTimeout(function(){c.fillText(j.target.value,j.target);c.inputResize(j.target)},20)}if(j.type=="cut"){c.removeChars(i.nextElementSibling,[i.selectionStart,i.selectionEnd])}if(!j.keyCode||j.keyCode<50){c.maskPassword(i)}if(!a){setTimeout(function(){c.setCaretHeight(j.target)},150)}if(i.selectionStart==i.value.length){i.parentNode.scrollLeft=999999}i.nextElementSibling.className=i.value?"":"empty"},setCaret:function(i){var m=f(i.parentNode).find(".caret"),l=f(i.nextElementSibling).children().not("b"),k=l.not(".deleted"),n=c.getCaretPosition(i);if(h.lastDir=="rtl"){n=i.value.length-n}var j=k.eq(n);if(n==i.value.length){m.appendTo(i.nextElementSibling)}else{m.insertBefore(j)}},getCaretPosition:function(i){var j,k=d.direction||"right";if(i.selectionStart||i.selectionStart=="0"){j=k=="left"?i.selectionStart:i.selectionEnd}return j||0}},d={direction:null,lastOffset:null,set:function(i){var j;if(i.shiftKey&&i.keyCode==37){j="left"}else{if(i.shiftKey&&i.keyCode==39){j="right"}}if(i.type=="mousedown"){d.lastOffset=i.clientX}else{if(i.type=="mouseup"){j=i.clientX<d.lastOffset?"left":"right"}}d.direction=j}},h={lastDir:null,check:function(m){var i="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF",k="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",l=new RegExp("^[^"+k+"]*["+i+"]"),n=new RegExp("^[^"+i+"]*["+k+"]");var j=n.test(m)?"rtl":(l.test(m)?"ltr":"");if(j){this.lastDir=j}return j}};function g(j){var i=j.selector;j.each(function(){var l="fancyInput",k=f('<div><b class="caret">&#8203;</b></div>');if(this.tagName=="TEXTAREA"){l+=" textarea"}f(this.parentNode).append(k).addClass(l);if(this.value){c.fillText(this.value,this)}if(this.placeholder){k.attr("data-placeholder",this.placeholder);if(!this.value){k.addClass("empty")}}});f(document).off(".fi",i).on("input.fi",i,c.input).on("keypress.fi",i,c.keypress).on("keyup.fi select.fi mouseup.fi cut.fi paste.fi blur.fi",i,c.allEvents).on("mousedown.fi mouseup.fi keydown.fi",i,d.set).on("keydown.fi",i,c.keydown)}window.fancyInput=c})(window.jQuery);