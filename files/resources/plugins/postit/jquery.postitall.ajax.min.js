const SERVER_URL="../dist/noteController.php";var guid=function(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}var getJsonRequest=function(b,c){var a=readCookie("iduser");if(a==null){a=guid();createCookie("iduser",a,365)}$.ajax({url:SERVER_URL+"?iduser="+a,data:b,error:function(d){console.log("An error has occurred",d)},success:function(d){if(d.status=="success"){if(c!=null){c(d.message)}}else{alert("An error has occurred"+d);if(c!=null){c(null)}}},type:"POST"})};var externalManager={test:function(a){getJsonRequest("option=test",function(b){if(b!==null){a(true)}else{a(false)}})},add:function(c,d){var a="PostIt_"+parseInt(c.id,10);var b=encodeURIComponent(JSON.stringify(c));getJsonRequest("option=add&key="+a+"&content="+b,d)},get:function(d,c){var b;var a="PostIt_"+parseInt(d,10);getJsonRequest("option=get&key="+a,function(g){try{b=JSON.parse(g)}catch(f){b=""}if(c!=null){c(b)}})},remove:function(a,b){a="PostIt_"+parseInt(a,10);getJsonRequest("option=remove&key="+a,b)},removeDom:function(c,h){var b=-1;var e=0;var a=false;if(c===undefined||typeof c==="function"){h=c;c={domain:window.location.origin,page:window.location.pathname}}var g=c.domain;var f=c.page;var d=this;d.getlength(function(j){if(!j){h();return}for(var k=1;k<=j;k++){d.key(k,function(i){d.getByKey(i,function(l){if(l!=null){if($.fn.postitall.globals.filter=="domain"){a=(getUrl(l.domain)===getUrl(g))}else{if($.fn.postitall.globals.filter=="page"){a=(getUrl(l.domain)===getUrl(g)&&(l.page===f||f===undefined))}else{a=true}}if(a){d.remove(l.id)}}if(e==(j-1)&&h!=null){h();h=null}e++})})}})},clear:function(e){var b=-1;var d=0;var a=false;var c=this;c.getlength(function(f){if(!f){e();return}for(var g=1;g<=f;g++){c.key(g,function(h){c.getByKey(h,function(i){if(i!=null){c.remove(i.id)}if(d==(f-1)&&e!=null){e();e=null}d++})})}})},getlength:function(b){var a=0;getJsonRequest("option=getlength",function(c){b(c)})},key:function(a,b){a--;getJsonRequest("option=key&key="+a,function(c){console.log("chromeManager.key "+a,c);if(c){b(c)}else{b("")}})},view:function(){console.log("view chrome");getJsonRequest("option=getByKey&key="+key,function(a){console.log(a)})},getByKey:function(a,b){if(a!=null&&a.slice(0,7)==="PostIt_"){a=a.slice(7,a.length);getJsonRequest("option=getByKey&key="+a,b)}else{if(b!=null){b(null)}}},getAll:function(a){getJsonRequest("option=getAll",a)}};